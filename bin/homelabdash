#!/usr/bin/env perl

use strict;
use warnings;
use Getopt::Long;

use HomelabDash::Config;
use HomelabDash::Logger;
use HomelabDash::Server;

my $conf_file_path;

GetOptions(
		'config=s' => \$conf_file_path,
) or die "Error in command line arguments\n";

if ($conf_file_path) {
	print "Using config file $conf_file_path\n";
}

my $config = HomelabDash::Config::load_config($conf_file_path);
my $logger = HomelabDash::Logger::init($config->{server_log_level});

# Run server
HomelabDash::Server::run($config);
